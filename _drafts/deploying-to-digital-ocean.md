---
layout: post
title: "Deploying An Express.js Application To Digital Ocean"
permalink: "deploying-an-expressjs-application-to-digital-ocean"
---

// TODO: Referral links at top and bottom

So you have written a Node.js web app using the Express.js framework and now you want to host it. In terms of pricing and configurability, I have not come across any host better than Digital Ocean. Starting at US$5/month, you can get full SSH access to a dedicated virtual Linux server, ready for Node.js hosting.

Consider using [my referral link](https://www.digitalocean.com/?refcode=69c47bb531c2) to create your Digital Ocean account to earn $10 in credit and support me at the same time.

Here's a short tutorial to get started with a very simple deployment. I will go through every step you need to take after you have an Express.js app running on `localhost`, from setting the Ubuntu server up to configuring ports using nginx. As of this time, I have a couple of production sites running this configuration, namely the [LegDay website](http://legday.co) and [Quibbler](http://quibbler.co).

<!--more-->

>Note: Most of this tutorial should apply to any server running a standard Ubuntu installation. As of this writing, I am running Ubuntu 14.04 on the server, but the same instructions should apply even several years from now.

## Prerequisites

For this tutorial, I assume that you are running a Unix-based OS on your local computer. I am running OS X Yosemite. However, anything that can be used for SSH access into the server should work.

Obviously, you need an Express.js app to deploy. The default app generated by [express-generator](http://expressjs.com/starter/generator.html) should work, if you just want to try things out. Basically, you need something configured so that when you run `npm start` in its directory, it starts hosting the app on a local server in your computer.

>Tip: This tutorial works for a Socket.IO powered real-time Express app as well.

You will require a Digital Ocean account. I would appreciate if you used [my referral link](https://www.digitalocean.com/?refcode=69c47bb531c2) to create your account. It will get you $10 credit automatically, while supporting me at the same time.

It would be nice to have some experience around the Unix command line, since we will be SSH'ing into the server and using it headless (without a screen) and remotely. 

>Note: You do not need to travel to where your server is.

## The Server

Time to spin up a simple Digital Ocean Droplet (server), running the latest Ubuntu. You may use another distribution of Linux if you wish, but there is no guarantee that all of the following instructions will apply to your system. I highly recommend Ubuntu to keep things simple.

Start by clicking the green Create Droplet button from anywhere on Digital Ocean (after you register and log in).

1. You can name the Droplet anything you want. I intend to use mine for any future projects, so I went with AntrikshyWeb.
2. Select your preferred pricing. The lowest tier is not bad at all. It can handle a small website very well. I'd recommend switching to a higher tier only if you feel like your server is not able to handle the traffic.
3. You can select any of the Droplet locations. It's always a good idea to pick one close to where you expect most of your visitors from.
4. Select the latest version of Ubuntu (64-bits) as the OS. As I mentioned earlier, 14.04 is the current version at the time of writing. In the Applications tab, select the latest version of Node.js to be pre-installed. For this simple setup, this is all you need.
5. I highly recommend creating an SSH key on your current computer and adding the public key to the server at this time. [This is a nice tutorial](https://help.github.com/articles/generating-ssh-keys/) to follow. Instead of adding the public key to your GitHub account, copy it into Digital Ocean's form. This way, no root password is generated, and only your computer can access the server via SSH. Of course you can change SSH settings around later.

Then create the Droplet. It should be ready with a fresh Ubuntu and Node.js installation within seconds. You can ask any questions you have at this point in the comments below. Every single one of them will be read.

### Digital Ocean Pricing Explained

If you're wondering how the Digital Ocean hourly and monthly pricing schemes work, it's pretty simple to understand. They charge you by hour, so you can immediately shut off the server without being charged for the entire month. The monthly fee is a cap for this hourly fee. Once you hit this cap, you are not charged per hour for the rest of the monthly billing cycle.

### First-Time Setup

With this fresh Ubuntu installation, you will need to perform a few more steps to get things snugly fit into place and running smoothly.

It is not a very nice idea to run things in production on the `root` user account. Since it has all possible permissions, it can be dangerous to use it for day-to-day purposes. You should create a standard user account for hosting this app (and perhaps all your other web stuff).

## Push & Test
## Create An Upstart Service
## Configure Ports
## Set Up Domain